<!DOCTYPE html> 
<html>
    <head>
        <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/danfojs@0.2.4/lib/bundle.min.js"></script>
    </head>
      <body>
        
        <div id="line_chart"></div>
        <div id="boxes"></div>
        
        <script>
            
            //danfo.read_csv("https://raw.githubusercontent.com/AugustCzy/152_final_mc1/main/MC1/data/data.csv")



            var line_chart = {
                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                "title": "Count of visit by hours",
                "width": 800,
                "height": 300,
                "data": {
                    "url": "https://raw.githubusercontent.com/AugustCzy/152_final_mc1/main/MC1/data/data.csv",
                    //"format": {"type": "csv"}
                },
                // "transform": [{
                //     "aggregate": [{
                //     "op": "count",
                //     //"field": "car-id",
                //     "as": "Counr of visit"
                //     }],
                //     "groupby": ["hours"]
                //     }
                // ],
                "mark": "line",
                // "params": [{
                //     "name": "industry",
                //     "select": {"type": "point", "fields": ["series"]},
                //     "bind": {"legend": "dblclick"}
                // }],
                "encoding": {
                    "x": {
                        "timeUnit": "hours",
                        "field": "Timestamp", 
                        //"scale": {"domain": [0, 24]},
                        "type": "ordinal",
                        //"axis": {"domain": false, "tickSize": 0}
                    },
                    "y": {
                        "aggregate": "count",
                        "field": "car-id", 
                        //"type": "quantitative"
                    },
                    //"color": {"field": "car-type"}
                }

            }

            var stay_time = {
                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                "title": "Stay time for each id",
                "width": 200,
                "height": 500,
                "data": {
                    "url": "https://raw.githubusercontent.com/AugustCzy/152_final_mc1/main/MC1/data/stay_time.csv?token=AQ6CAK6S5OLCRZATJLNK5X3AQD7EK",
                    "format": {"type": "csv"}
                },
                "mark": "boxplot",
                "encoding": {
                //"x": {"field": "hours", "type": "nominal"},
                //"color": {"field": "Species", "type": "nominal", "legend": null},
                "y": {
                "field": "hours",
                "type": "quantitative",
                "scale": {"domain": [-1000, 9000]},

                "selection": {
                "grid": {
                    "type": "interval", "bind": "scales",
                    "zoom": "wheel!"
                    }
                },
                }
                }
            }

            var visit_freq = {
                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                "title": "Visit Frequency for each id",
                "width": 200,
                "height": 500,
                "data": {
                    "url": "https://raw.githubusercontent.com/AugustCzy/152_final_mc1/main/MC1/data/visit_freq.csv",
                    "format": {"type": "csv"}
                },
                "mark": "boxplot",
                "encoding": {
                //"x": {"field": "hours", "type": "nominal"},
                //"color": {"field": "Species", "type": "nominal", "legend": null},
                "y": {
                "field": "Date",
                "type": "quantitative",
                "scale": {"domain": [-50, 300]},

                "selection": {
                "grid": {
                    "type": "interval", "bind": "scales",
                    "zoom": "wheel!"
                    }
                },
                }
                }
            }

            var two_boxes = {
                "hconcat": [stay_time, visit_freq]
            }

            
            


            //vegaEmbed('#stay_time', stay_time)
            //vegaEmbed('#visit_freq', visit_freq)
            vegaEmbed('#boxes', two_boxes)
            vegaEmbed('#line_chart', line_chart)

        </script>
      </body>
</html>